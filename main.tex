\documentclass[letterpaper,12pt]{article}

% --- PAQUETES DE IDIOMA
\usepackage[spanish,mexico]{babel}
\usepackage[utf8]{inputenc}
\usepackage{csquotes}

% --- PAQUETES MATEMÁTICOS --
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{cancel}
\usepackage{mathrsfs}

% --- PAQUETES GRÁFICOS Y DE DISEÑO ---
\usepackage{graphicx}
\usepackage{float}
\usepackage{subcaption}
\usepackage{xcolor}
\usepackage{makecell}
\usepackage{array}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, shapes.multipart, positioning, arrows.meta, calc, shadows, decorations.pathreplacing,babel}

% --- LISTAS ---
\usepackage{enumitem}

% --- PAQUETES DE CÓDIGO ---
\usepackage{listings}
% Configuración del estilo de listings
\definecolor{codebg}{rgb}{0.95,0.95,0.95}   
\definecolor{keyword}{rgb}{0.0,0.2,0.6}     
\definecolor{comment}{rgb}{0.25,0.5,0.35}   
\definecolor{string}{rgb}{0.6,0.0,0.0}      
\definecolor{number}{rgb}{0.5,0.0,0.5}      
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.95}

\lstset{
  backgroundcolor=\color{backcolour},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{codepurple},
  commentstyle=\color{codegray}\itshape,
  numbers=left,
  numberstyle=\tiny\color{codegray},
  frame=single,
  rulecolor=\color{black},
  breaklines=true,
  tabsize=4,
  showstringspaces=false,
  literate={á}{{\'a}}1
           {é}{{\'e}}1
           {í}{{\'i}}1
           {ó}{{\'o}}1
           {ú}{{\'u}}1
           {Á}{{\'A}}1
           {É}{{\'E}}1
           {Í}{{\'I}}1
           {Ó}{{\'O}}1
           {Ú}{{\'U}}1
           {ñ}{{\~n}}1
           {Ñ}{{\~N}}1
           {¿}{{\textquestiondown}}1
           {¡}{{\textexclamdown}}1
}

% Definición del lenguaje ARM Assembler para listings
\lstdefinelanguage[ARM]{Assembler}{
  morekeywords={MOV, ADD, SUB, SUBS, MUL, AND, ORR, EOR, NOT, CMP, TST,
                BEQ, BNE, BGT, BLT, BGE, BLE, B, BL, BX, BLX,
                LDR, STR, LDRB, STRB, PUSH, POP, SVC, LSL, LSR, ASR,
                ROR, RRX, MVN, RSB, ADC, SBC, MLA, SMULL, UMULL,
                STMFD, LDMFD, STMIA, LDMIA, NOP},
  morecomment=[l]{@},
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]",
  sensitive=false
}

% --- ESTILOS PARA DIAGRAMAS DE FLUJO (TIKZ) ---
\tikzset{
  startstop/.style={rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=red!30},
  process/.style={rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=orange!30},
  decision/.style={diamond, aspect=2, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=green!30},
  io/.style={trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=blue!30},
  arrow/.style={thick,->,>=stealth}
}


\definecolor{azulresultado}{HTML}{0072C6}
\definecolor{rojoacarreo}{HTML}{FF0000}

% --- RUTAS DE IMÁGENES ---
\graphicspath{{img/}{portada_img/}}

\definecolor{armblue}{RGB}{0, 113, 188}

% --- CONFIGURACIÓN DE PÁGINA (GEOMETRÍA) ---
\usepackage[
    left=25mm, 
    right=25mm,
    top=35mm,
    bottom=30mm,
    headheight=77pt, 
    papersize={21.59cm,27.94cm}
]{geometry}

% --- FORMATO DE TEXTO ---
\renewcommand{\baselinestretch}{1.25} 
\usepackage{parskip} 
\usepackage{lipsum}  

% --- VARIABLES GLOBALES ---
\newcommand{\materia}{}

% --- ENCABEZADOS Y PIES DE PÁGINA ---
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} 
\fancyhead[L]{\includegraphics[height=1.5cm]{portada_img/izq.png}}
\fancyhead[R]{\includegraphics[height=1.5cm]{portada_img/der.png}}
\fancyfoot[C]{\thepage} 
\renewcommand{\headrulewidth}{0.4pt} 
\renewcommand{\footrulewidth}{0pt}  

% --- BIBLIOGRAFÍA ---
\usepackage[backend=biber, style=apa, sortcites, url=true]{biblatex}
\addbibresource{referencias.bib}

% --- HIPERVÍNCULOS ---
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    citecolor=blue,
    filecolor=magenta,
    urlcolor=cyan
}

\begin{document}

    \input{portada.tex}

    \newpage
    \setcounter{page}{1}

    \section{Objetivo:}
    Programar las variantes del modo de direccionamiento indirecto existentes para los procesadores ARM.

    \section*{Actividad 1}
    Escribir, comentar, compilar y comprobar el funcionamiento del siguiente programa.

    \subsection*{Propuesta de solución}


    \textbf{Desarrollo}

    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 1]{Codigos/act1.s}


    \textbf{Análisis de resultados}


    \newpage

    \section*{Actividad 2}
    Modificar el programa de la actividad 1, para usar el direccionamiento indexado de su preferencia con el doble de datos.

    \subsection*{Propuesta de solución}


    \textbf{Desarrollo}
    
    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 2]{Codigos/act2.s}


    \textbf{Análisis de resultados}

    \section*{Actividad 3}

    Realizar un programa almacene en memoria un arreglo de datos de 32 bits con 16 elementos; una vez transferidos, realizar la copia en sentido inverso en otro arreglo.
    
    \begin{center}

    \[A = [\, \text{dato}_1,\, \text{dato}_2,\, \text{dato}_3,\, \text{dato}_4,\, \ldots,\, \text{dato}_{15},\, \text{dato}_{16} \,] \quad @\text{Original}\]

    \[B = [\, \text{dato}_{16},\, \text{dato}_{15},\, \text{dato}_{14},\, \text{dato}_{13},\, \ldots,\, \text{dato}_2,\, \text{dato}_1 \,] \quad @\text{Copia}\]
    \end{center}


    \subsection*{Propuesta de solución}

    \textbf{Desarrollo}

    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 3]{Codigos/act3.s}


    \textbf{Análisis de resultados}



    \newpage

    \section*{Actividad 4}

    Realizar un programa que forme un arreglo de 20 elementos, con el siguiente criterio:

    \[A = [\, i,\, 2i,\, 4i,\, 8i,\, 16i,\, \ldots,\, ni \,]\]

    Donde $i$ es un número considerado como valor inicial.

    \begin{enumerate}
        \item [a)] Enviar a memoria cada uno de ellos.
        \item [b)] Sumar y almacenar en memoria el resultado.
    \end{enumerate}

    \subsection*{Propuesta de solución}


    \textbf{Desarrollo}

    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 4]{Codigos/act4.s}


    \textbf{Análisis de resultados}


    \section*{Actividad 5}
    Realizar un programa que multiplique dos matrices de 2x2; los datos podrán ser de 8 bits.

    \[\begin{bmatrix}
        A & B \\
        C & D
    \end{bmatrix}
    \begin{bmatrix}
        E & F \\
        G & H
    \end{bmatrix}
        =
    \begin{bmatrix}
        I & J \\
        K & L
    \end{bmatrix}\]

    \subsection*{Propuesta de solución}


    \textbf{Desarrollo}

    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 5]{Codigos/act5.s}


    \textbf{Análisis de resultados}

    \section*{Actividad 6}
    Realizar un programa que encuentre el número con valor mayor en un arreglo de 20 elementos que serán almacenados en memoria; para lo cual:

    \begin{enumerate}
        \item [a)] Indicar cuál fue el valor mayor.
        \item [b)] Ubicar la dirección donde se encontró este número.
        \item [c)] Usar las direcciones que requiera para cumplir lo solicitado.
    \end{enumerate}


    \subsection*{Propuesta de solución}


    \textbf{Desarrollo}

    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 6]{Codigos/act6.s}

    \textbf{Análisis de resultados}


    \newpage

    \section*{Actividad 7}

    Realizar un programa que ordene de manera ascendente un arreglo de 32 elementos de 32 bits; deberá:
    \begin{itemize}
        \item [a)] Mantener el arreglo original.
        \item [b)] Generar otro arreglo con el ordenamiento del original.
    \end{itemize}

    \vspace{0.5cm}

    \textbf{Arreglo original.}

    \[\begin{array}{|c|c|c|c|c|}
        \hline
        A[0] & A[1] & A[2] & \cdots & A[31] \\
        \hline
    \end{array}\]

    \vspace{0.5cm}

    \textbf{Arreglo ordenado.}

    \[\begin{array}{|c|c|}
        \hline
        \text{Menor } A[x] & \text{Mayor } A[y] \\
        \hline
    \end{array}\]

    \subsection*{Propuesta de solución}


    \textbf{Desarrollo}

    \lstinputlisting[language={[ARM]Assembler}, caption=Código de la Actividad 7]{Codigos/act7.s}

    \textbf{Análisis de resultados}


    \newpage
    \section{Conclusiones:}

    \begin{itemize}
        \item \textbf{Espinoza Matamoros Percival Ulises:} 
        
        \item \textbf{Flores Colin Victor Jaziel:} 
        
        \item \textbf{Lara Hernandez Angel Husiel:} 
    \end{itemize}

    \newpage

    % Impresión Referencias
    \nocite{*}
    \printbibliography[heading=bibintoc, title={Referencias}]
\end{document}